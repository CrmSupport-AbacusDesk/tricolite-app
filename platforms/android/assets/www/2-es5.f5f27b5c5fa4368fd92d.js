(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{qApi:function(l,n,e){"use strict";e.r(n);var t=e("8Y7J");class a{}var u=e("pMnS"),o=e("oBZk"),s=e("ZZ/e"),i=e("SVse"),d=e("ekNO"),r=e("qyy+"),c=e("s7LF"),p=e("mrSG"),h=e("Hx2x"),m=e("+AJq");class g{constructor(l,n,e,t,a,u,o){this.popoverController=l,this.router=n,this.location=e,this.routeParams=t,this.alertCtrl=a,this.toastCtrl=u,this.dbService=o,this.taskId="",this.taskNo="",this.taskStatus="",this.partList=[],this.partCartData=[],this.data={},this.routeParams.params.subscribe(l=>{console.log(l),this.taskId=l.taskId,this.taskNo=l.taskNo,this.taskStatus=l.taskStatus,console.log(this.taskId),console.log(this.taskNo),console.log(this.taskStatus),this.onGetTaskSparePartDataHandler()})}ngOnInit(){}onGetTaskSparePartDataHandler(){return p.b(this,void 0,void 0,(function*(){this.dbService.onPostRequestHandler({taskId:this.taskId},"task/getTaskSparePartData").subscribe(l=>{console.log(l),this.partList=l.taskAssignedPartData})}))}onItemSelectedHandler(l){console.log(l)}onSaveInstalledPartHandler(){return p.b(this,void 0,void 0,(function*(){if(this.partCartData&&0!=this.partCartData.length){const l=yield this.alertCtrl.create({header:"Confirm",message:"Are You Sure, You Want To Save Part ?",buttons:[{text:"No",role:"cancel",handler:()=>{console.log("No clicked")}},{text:"Yes",handler:()=>{console.log("Yes clicked");const l={taskId:this.taskId,installedPartData:this.partCartData};this.dbService.presentLoader(),this.dbService.onPostRequestHandler(l,"task/onSaveTaskPartData").subscribe(l=>{console.log(l),this.dbService.dismissLoader(),this.data.status="",this.router.navigateByUrl("/technicians/"+localStorage.getItem("routeType")+"/details/spareparts/"+this.taskId+"/"+this.taskNo+"/"+this.taskStatus),this.dbService.presentToast("Part Saved Successfully!")})}}]});yield l.present()}else this.dbService.onShowAlertMessage("Error","Part Required!")}))}onAddToCartHandler(){let l=!1,n="";!this.data.part||this.data.part_id?(l=!0,n="Part Name Required!"):(!this.data.qty||0==this.data.qty||this.data.qty<0)&&(l=!0,n="Qty Required!");let e=0;const t=this.partList.findIndex(l=>l.part_id==this.data.part.part_id);let a=!1;if(-1!=t){console.log(this.data.part);const l=this.partCartData.filter(l=>l.part_id==this.data.part.part_id);if(console.log(l),0==l.length)e=this.data.qty;else{for(let n=0;n<l.length;n++)e+=l[n].qty;e+=this.data.qty}e>this.partList[t].totalQty&&(a=!0,n="Qty Should Not be more than assigned Part Qty")}if(console.log(e),l||a)this.dbService.onShowAlertMessage("Error",n);else{const l=this.partCartData.findIndex(l=>l.part_id==this.data.part.part_id);if(-1===l){const l=this.partList.findIndex(l=>l.part_id==this.data.part.part_id);this.partCartData.push({part_name:this.data.part.part_name,part_id:this.data.part.part_id,part_no:this.partList[l].part_no,qty:this.data.qty,lastUpdated:this.partList[l].lastUpdated})}else this.partCartData[l].qty=e;this.data={},this.dbService.presentToast("Item Updated To Cart Successfully!")}}onItemDeleteHandler(l){return p.b(this,void 0,void 0,(function*(){const n=yield this.alertCtrl.create({header:"Confirm",message:"Are You Sure, You Want To Delete Item ?",buttons:[{text:"No",role:"cancel",handler:()=>{console.log("No clicked")}},{text:"Yes",handler:()=>{console.log("Yes clicked"),this.partCartData.splice(l,1),this.dbService.presentToast("Item Deleted!")}}]});yield n.present()}))}presentPopover(l){return p.b(this,void 0,void 0,(function*(){const n={taskId:this.taskId,taskNo:this.taskNo};yield this.popoverController.create({component:h.a,event:l,translucent:!0,componentProps:n})}))}GoToSpareParts(){this.location.back()}}var f=e("iInd"),v=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function b(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,16,"div",[["class","figure pb0"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,15,"div",[["class","cnt-info"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,6,"div",[["class","cs-left"]],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,5,"div",[["class","names"]],null,null,null,null,null)),(l()(),t["\u0275eld"](4,0,null,null,1,"h1",[],null,null,null,null,null)),(l()(),t["\u0275ted"](5,null,["",""])),(l()(),t["\u0275eld"](6,0,null,null,2,"ion-text",[],null,null,null,o.tb,o.H)),t["\u0275did"](7,49152,null,0,s.yb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(l()(),t["\u0275ted"](8,0,["Last Update : ",""])),(l()(),t["\u0275eld"](9,0,null,null,7,"div",[["class","cs-right"]],null,null,null,null,null)),(l()(),t["\u0275eld"](10,0,null,null,6,"div",[["class","count-delete"]],null,null,null,null,null)),(l()(),t["\u0275eld"](11,0,null,null,1,"div",[["class","count"]],null,null,null,null,null)),(l()(),t["\u0275ted"](12,null,["",""])),(l()(),t["\u0275eld"](13,0,null,null,3,"ion-button",[["color","danger"],["fill","clear"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onItemDeleteHandler(l.context.index)&&t),t}),o.N,o.b)),t["\u0275did"](14,49152,null,0,s.l,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{color:[0,"color"],fill:[1,"fill"]},null),(l()(),t["\u0275eld"](15,0,null,0,1,"ion-icon",[["name","trash"]],null,null,null,o.X,o.l)),t["\u0275did"](16,49152,null,0,s.D,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{name:[0,"name"]},null)],(function(l,n){l(n,14,0,"danger","clear"),l(n,16,0,"trash")}),(function(l,n){l(n,5,0,n.context.$implicit.part_name),l(n,8,0,n.context.$implicit.lastUpdated),l(n,12,0,n.context.$implicit.qty)}))}function C(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,5,"div",[["class","complaints product-list mt20"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,2,"div",[["class","cs-heading"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,1,"h1",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Spare Parts"])),(l()(),t["\u0275and"](16777216,null,null,1,null,b)),t["\u0275did"](5,278528,null,0,i.j,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,5,0,n.component.partCartData)}),null)}function k(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","cs-btn mt50"],["text-right",""]],null,null,null,null,null)),t["\u0275did"](1,16384,null,0,s.f,[t.ElementRef],null,null),(l()(),t["\u0275eld"](2,0,null,null,2,"ion-button",[["class","success round large w150"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onSaveInstalledPartHandler()&&t),t}),o.N,o.b)),t["\u0275did"](3,49152,null,0,s.l,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(l()(),t["\u0275ted"](-1,0,["SAVE"]))],null,null)}function R(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,71,"ion-content",[],null,null,null,o.R,o.f)),t["\u0275did"](1,49152,null,0,s.v,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(l()(),t["\u0275eld"](2,0,null,0,69,"div",[["class","cs-main-container"]],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,18,"div",[["class","custome-head"]],null,null,null,null,null)),(l()(),t["\u0275eld"](4,0,null,null,16,"div",[["class","cs-ion-header"]],null,null,null,null,null)),(l()(),t["\u0275eld"](5,0,null,null,10,"div",[["class","cs-left"]],null,null,null,null,null)),(l()(),t["\u0275eld"](6,0,null,null,3,"ion-button",[],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.GoToSpareParts()&&t),t}),o.N,o.b)),t["\u0275did"](7,49152,null,0,s.l,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(l()(),t["\u0275eld"](8,0,null,0,1,"ion-icon",[["name","arrow-back"]],null,null,null,o.X,o.l)),t["\u0275did"](9,49152,null,0,s.D,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{name:[0,"name"]},null),(l()(),t["\u0275eld"](10,0,null,null,5,"ion-title",[],null,null,null,o.vb,o.J)),t["\u0275did"](11,49152,null,0,s.Bb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(l()(),t["\u0275ted"](12,0,["#SR-"," - "])),(l()(),t["\u0275eld"](13,0,null,0,2,"ion-text",[],null,null,null,o.tb,o.H)),t["\u0275did"](14,49152,null,0,s.yb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(l()(),t["\u0275ted"](-1,0,["Install Spare Parts"])),(l()(),t["\u0275eld"](16,0,null,null,4,"div",[["class","cs-right"]],null,null,null,null,null)),(l()(),t["\u0275eld"](17,0,null,null,3,"ion-button",[],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.presentPopover(e)&&t),t}),o.N,o.b)),t["\u0275did"](18,49152,null,0,s.l,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(l()(),t["\u0275eld"](19,0,null,0,1,"ion-icon",[["name","more"]],null,null,null,o.X,o.l)),t["\u0275did"](20,49152,null,0,s.D,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{name:[0,"name"]},null),(l()(),t["\u0275eld"](21,0,null,null,0,"div",[["class","cs-ion-hf"]],null,null,null,null,null)),(l()(),t["\u0275eld"](22,0,null,null,49,"div",[["class","cs-ion-content pt0"],["padding",""]],null,null,null,null,null)),t["\u0275did"](23,16384,null,0,s.f,[t.ElementRef],null,null),(l()(),t["\u0275eld"](24,0,null,null,43,"div",[["class","common_form inner_page"]],null,null,null,null,null)),(l()(),t["\u0275eld"](25,0,null,null,24,"ion-item",[["class","cs-select"]],null,null,null,o.db,o.p)),t["\u0275did"](26,49152,null,0,s.I,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(l()(),t["\u0275eld"](27,0,null,0,2,"ion-label",[],null,null,null,o.eb,o.s)),t["\u0275did"](28,49152,null,0,s.O,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(l()(),t["\u0275ted"](-1,0,["Select Part Name"])),(l()(),t["\u0275eld"](30,0,null,0,19,"ionic-selectable",[["itemTextField","partNameWithNo"],["itemValueField","part_id"]],[[2,"ionic-selectable",null],[2,"ionic-selectable-ios",null],[2,"ionic-selectable-md",null],[2,"ionic-selectable-is-multiple",null],[2,"ionic-selectable-has-value",null],[2,"ionic-selectable-has-placeholder",null],[2,"ionic-selectable-has-label",null],[2,"ionic-selectable-label-default",null],[2,"ionic-selectable-label-fixed",null],[2,"ionic-selectable-label-stacked",null],[2,"ionic-selectable-label-floating",null],[2,"ionic-selectable-is-enabled",null],[2,"ionic-selectable-can-clear",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"onChange"]],(function(l,n,e){var t=!0,a=l.component;return"ngModelChange"===n&&(t=!1!==(a.data.part=e)&&t),"onChange"===n&&(t=!1!==a.onItemSelectedHandler(e)&&t),t}),d.d,d.c)),t["\u0275did"](31,376832,null,14,r.a,[s.Ib,s.Mb,[2,s.I],t.IterableDiffers,t.ElementRef,t.Renderer],{items:[0,"items"],itemValueField:[1,"itemValueField"],itemTextField:[2,"itemTextField"],canSearch:[3,"canSearch"]},{onChange:"onChange"}),t["\u0275qud"](603979776,1,{valueTemplate:0}),t["\u0275qud"](603979776,2,{itemTemplate:0}),t["\u0275qud"](603979776,3,{itemEndTemplate:0}),t["\u0275qud"](603979776,4,{titleTemplate:0}),t["\u0275qud"](603979776,5,{placeholderTemplate:0}),t["\u0275qud"](603979776,6,{messageTemplate:0}),t["\u0275qud"](603979776,7,{groupTemplate:0}),t["\u0275qud"](603979776,8,{groupEndTemplate:0}),t["\u0275qud"](603979776,9,{closeButtonTemplate:0}),t["\u0275qud"](603979776,10,{searchFailTemplate:0}),t["\u0275qud"](603979776,11,{addItemTemplate:0}),t["\u0275qud"](603979776,12,{footerTemplate:0}),t["\u0275qud"](603979776,13,{headerTemplate:0}),t["\u0275qud"](603979776,14,{itemIconTemplate:0}),t["\u0275prd"](1024,null,c.i,(function(l){return[l]}),[r.a]),t["\u0275did"](47,671744,null,0,c.m,[[8,null],[8,null],[8,null],[6,c.i]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,c.j,null,[c.m]),t["\u0275did"](49,16384,null,0,c.k,[[4,c.j]],null,null),(l()(),t["\u0275eld"](50,0,null,null,17,"div",[["class","dflex"]],null,null,null,null,null)),(l()(),t["\u0275eld"](51,0,null,null,11,"ion-item",[["class","mw95 ml10 mr10"]],null,null,null,o.db,o.p)),t["\u0275did"](52,49152,null,0,s.I,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(l()(),t["\u0275eld"](53,0,null,0,2,"ion-label",[["position","floating"]],null,null,null,o.eb,o.s)),t["\u0275did"](54,49152,null,0,s.O,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{position:[0,"position"]},null),(l()(),t["\u0275ted"](-1,0,["QTY"])),(l()(),t["\u0275eld"](56,0,null,0,6,"ion-input",[["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keypress"],[null,"ionBlur"],[null,"ionChange"]],(function(l,n,e){var a=!0,u=l.component;return"ionBlur"===n&&(a=!1!==t["\u0275nov"](l,57)._handleBlurEvent(e.target)&&a),"ionChange"===n&&(a=!1!==t["\u0275nov"](l,57)._handleIonChange(e.target)&&a),"ngModelChange"===n&&(a=!1!==(u.data.qty=e)&&a),"keypress"===n&&(a=!1!==u.dbService.numberOnly(e)&&a),a}),o.ab,o.o)),t["\u0275did"](57,16384,null,0,s.Lb,[t.ElementRef],null,null),t["\u0275prd"](1024,null,c.i,(function(l){return[l]}),[s.Lb]),t["\u0275did"](59,671744,null,0,c.m,[[8,null],[8,null],[8,null],[6,c.i]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,c.j,null,[c.m]),t["\u0275did"](61,16384,null,0,c.k,[[4,c.j]],null,null),t["\u0275did"](62,49152,null,0,s.H,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{type:[0,"type"]},null),(l()(),t["\u0275eld"](63,0,null,null,4,"div",[["class","plus-icon"]],null,null,null,null,null)),(l()(),t["\u0275eld"](64,0,null,null,3,"ion-button",[["color","success"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onAddToCartHandler()&&t),t}),o.N,o.b)),t["\u0275did"](65,49152,null,0,s.l,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{color:[0,"color"]},null),(l()(),t["\u0275eld"](66,0,null,0,1,"ion-icon",[["name","add"]],null,null,null,o.X,o.l)),t["\u0275did"](67,49152,null,0,s.D,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{name:[0,"name"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,C)),t["\u0275did"](69,16384,null,0,i.k,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,k)),t["\u0275did"](71,16384,null,0,i.k,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,9,0,"arrow-back"),l(n,20,0,"more"),l(n,31,0,e.partList,"part_id","partNameWithNo",!0),l(n,47,0,e.data.part),l(n,54,0,"floating"),l(n,59,0,e.data.qty),l(n,62,0,"number"),l(n,65,0,"success"),l(n,67,0,"add"),l(n,69,0,e.partCartData&&e.partCartData.length>0),l(n,71,0,e.partCartData&&e.partCartData.length>0)}),(function(l,n){l(n,12,0,n.component.taskNo),l(n,30,1,[t["\u0275nov"](n,31)._cssClass,t["\u0275nov"](n,31)._isIos,t["\u0275nov"](n,31)._isMD,t["\u0275nov"](n,31)._isMultipleCssClass,t["\u0275nov"](n,31)._hasValueCssClass,t["\u0275nov"](n,31)._hasPlaceholderCssClass,t["\u0275nov"](n,31)._hasIonLabelCssClass,t["\u0275nov"](n,31)._hasDefaultIonLabelCssClass,t["\u0275nov"](n,31)._hasFixedIonLabelCssClass,t["\u0275nov"](n,31)._hasStackedIonLabelCssClass,t["\u0275nov"](n,31)._hasFloatingIonLabelCssClass,t["\u0275nov"](n,31).isEnabled,t["\u0275nov"](n,31).canClear,t["\u0275nov"](n,49).ngClassUntouched,t["\u0275nov"](n,49).ngClassTouched,t["\u0275nov"](n,49).ngClassPristine,t["\u0275nov"](n,49).ngClassDirty,t["\u0275nov"](n,49).ngClassValid,t["\u0275nov"](n,49).ngClassInvalid,t["\u0275nov"](n,49).ngClassPending]),l(n,56,0,t["\u0275nov"](n,61).ngClassUntouched,t["\u0275nov"](n,61).ngClassTouched,t["\u0275nov"](n,61).ngClassPristine,t["\u0275nov"](n,61).ngClassDirty,t["\u0275nov"](n,61).ngClassValid,t["\u0275nov"](n,61).ngClassInvalid,t["\u0275nov"](n,61).ngClassPending)}))}var I=t["\u0275ccf"]("app-com-installspareparts",g,(function(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"app-com-installspareparts",[],null,null,null,R,v)),t["\u0275did"](1,114688,null,0,g,[s.Nb,f.m,i.g,f.a,s.b,s.Sb,m.a],null,null)],(function(l,n){l(n,1,0)}),null)}),{},{},[]);class D{}var N=e("A2Kn");e.d(n,"ComInstallsparepartsPageModuleNgFactory",(function(){return S}));var S=t["\u0275cmf"](a,[],(function(l){return t["\u0275mod"]([t["\u0275mpd"](512,t.ComponentFactoryResolver,t["\u0275CodegenComponentFactoryResolver"],[[8,[u.a,I,d.a,d.b]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["\u0275mpd"](4608,i.m,i.l,[t.LOCALE_ID,[2,i.z]]),t["\u0275mpd"](4608,c.s,c.s,[]),t["\u0275mpd"](4608,s.c,s.c,[t.NgZone,t.ApplicationRef]),t["\u0275mpd"](4608,s.Ib,s.Ib,[s.c,t.ComponentFactoryResolver,t.Injector]),t["\u0275mpd"](4608,s.Nb,s.Nb,[s.c,t.ComponentFactoryResolver,t.Injector]),t["\u0275mpd"](1073742336,i.b,i.b,[]),t["\u0275mpd"](1073742336,c.r,c.r,[]),t["\u0275mpd"](1073742336,c.e,c.e,[]),t["\u0275mpd"](1073742336,s.Fb,s.Fb,[]),t["\u0275mpd"](1073742336,f.p,f.p,[[2,f.u],[2,f.m]]),t["\u0275mpd"](1073742336,D,D,[]),t["\u0275mpd"](1073742336,N.a,N.a,[]),t["\u0275mpd"](1073742336,a,a,[]),t["\u0275mpd"](1024,f.k,(function(){return[[{path:"",component:g}]]}),[])])}))}}]);