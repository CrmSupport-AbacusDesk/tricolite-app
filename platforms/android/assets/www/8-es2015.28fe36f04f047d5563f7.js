(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"9P+b":function(l,n,e){"use strict";e.r(n);var t=e("8Y7J");class a{}var o=e("pMnS"),i=e("oBZk"),s=e("ZZ/e"),u=e("SVse"),r=e("mrSG"),c=e("Hx2x"),d=e("iLn7"),m=e("Pn9U"),g=e("cdBk"),h=e("jcOq"),p=e("+AJq"),v=e("iQv9");class f{constructor(l,n,e,t,a,o,i,s,u,r,c,d,m){this.popoverController=l,this.actionCtrl=n,this.location=e,this.router=t,this.routeParams=a,this.alertCtrl=o,this.toastCtrl=i,this.diagnostic=s,this.camera=u,this.imagePicker=r,this.base64=c,this.dbService=d,this.photoViewer=m,this.taskId="",this.taskNo="",this.imageData=[],this.loginData={},this.taskImageData=[],this.routeParams.params.subscribe(l=>{console.log(l),this.taskId=l.taskId,this.taskNo=l.taskNo,console.log(this.taskId),console.log(this.taskNo),this.onGetTaskImageDataHandler()})}ngOnInit(){this.loginData=JSON.parse(localStorage.getItem("loginData"))}onGetTaskImageDataHandler(){return r.b(this,void 0,void 0,(function*(){const l={taskId:this.taskId};this.dbService.presentLoader(),this.dbService.onPostRequestHandler(l,"task/getTaskImageData").subscribe(l=>{console.log(l),this.dbService.dismissLoader(),this.taskImageData=l.taskImageData})}))}onSaveImageDataHandler(){return r.b(this,void 0,void 0,(function*(){const l=[];let n={};console.log(this.imageData);for(let t=0;t<this.imageData.length;t++){n=new FormData;const e=this.imageData[t].image.split("base64,");Math.random().toString(36).substring(7),n.binaryData=e[1],n.taskId=this.taskId,l.push(n)}const e={taskId:this.taskId,uploadData:l};console.log(e),this.dbService.presentLoader(),this.dbService.onPostRequestHandler(e,"task/onSaveTaskImagesData").subscribe(l=>{console.log(l),this.dbService.dismissLoader(),this.dbService.presentToast("Image Saved Successfully!"),setTimeout(()=>{this.onGetTaskImageDataHandler()},1e3)})}))}takePhotograph(){this.diagnostic.requestCameraAuthorization().then(l=>{this.camera.getPicture({quality:40,targetWidth:600,targetHeight:600,destinationType:this.camera.DestinationType.DATA_URL}).then(l=>{this.imageData=[],this.imageData.push({image:"data:image/jpeg;base64,"+l}),console.log(this.imageData),this.onSaveImageDataHandler()})}).catch(l=>{console.log(l)})}selectImageFromGallery(){this.diagnostic.requestCameraAuthorization().then(l=>{console.log(l),this.imageData=[],this.imagePicker.getPictures({maximumImagesCount:10,DATA_URI:1,quality:40}).then(l=>{let n=1;for(var e=0;e<l.length;e++)this.base64.encodeFile(l[e]).then(e=>{console.log(e),this.imageData.push({image:e}),console.log(this.imageData),n==l.length&&this.onSaveImageDataHandler(),n++},l=>{console.log(l)})},l=>{})}).catch(l=>{console.log(l)})}onViewImageHandler(l){return r.b(this,void 0,void 0,(function*(){const n=this.dbService.uploadURL+this.taskImageData[l].image_url;console.log(n),this.photoViewer.show(n)}))}presentActionSheet(){return r.b(this,void 0,void 0,(function*(){const l=yield this.actionCtrl.create({header:"Select image from",buttons:[{text:"Camera",icon:"camera",handler:()=>{console.log("Camera Clicked"),this.takePhotograph()}},{text:"Gallery",icon:"image",handler:()=>{console.log("Gallery Clicked"),this.selectImageFromGallery()}}]});yield l.present()}))}onRemoveImageHandler(l){this.imageData.splice(l,1)}presentPopover(l){return r.b(this,void 0,void 0,(function*(){const n={taskId:this.taskId,taskNo:this.taskNo},e=yield this.popoverController.create({component:c.a,event:l,translucent:!0,componentProps:n});return yield e.present()}))}GoComplaintDetail(){this.location.back()}}var b=e("iInd"),k=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function D(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","cs-right"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,3,"ion-button",[],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.presentPopover(e)&&t),t}),i.N,i.b)),t["\u0275did"](2,49152,null,0,s.l,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(l()(),t["\u0275eld"](3,0,null,0,1,"ion-icon",[["name","more"]],null,null,null,i.X,i.l)),t["\u0275did"](4,49152,null,0,s.D,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{name:[0,"name"]},null)],(function(l,n){l(n,4,0,"more")}),null)}function I(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"div",[["class","figure"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,0,"img",[["alt",""]],[[8,"src",4]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onViewImageHandler(l.context.index)&&t),t}),null,null))],null,(function(l,n){l(n,1,0,n.component.dbService.uploadURL+n.context.$implicit.image_url)}))}function R(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,27,"ion-content",[],null,null,null,i.R,i.f)),t["\u0275did"](1,49152,null,0,s.v,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(l()(),t["\u0275eld"](2,0,null,0,25,"div",[["class","cs-main-container"]],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,15,"div",[["class","custome-head"]],null,null,null,null,null)),(l()(),t["\u0275eld"](4,0,null,null,13,"div",[["class","cs-ion-header"]],null,null,null,null,null)),(l()(),t["\u0275eld"](5,0,null,null,10,"div",[["class","cs-left"]],null,null,null,null,null)),(l()(),t["\u0275eld"](6,0,null,null,3,"ion-button",[],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.GoComplaintDetail()&&t),t}),i.N,i.b)),t["\u0275did"](7,49152,null,0,s.l,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(l()(),t["\u0275eld"](8,0,null,0,1,"ion-icon",[["name","arrow-back"]],null,null,null,i.X,i.l)),t["\u0275did"](9,49152,null,0,s.D,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{name:[0,"name"]},null),(l()(),t["\u0275eld"](10,0,null,null,5,"ion-title",[],null,null,null,i.vb,i.J)),t["\u0275did"](11,49152,null,0,s.Bb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(l()(),t["\u0275ted"](12,0,["#SR-"," - "])),(l()(),t["\u0275eld"](13,0,null,0,2,"ion-text",[],null,null,null,i.tb,i.H)),t["\u0275did"](14,49152,null,0,s.yb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(l()(),t["\u0275ted"](-1,0,["Images"])),(l()(),t["\u0275and"](16777216,null,null,1,null,D)),t["\u0275did"](17,16384,null,0,u.k,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](18,0,null,null,0,"div",[["class","cs-ion-hf"]],null,null,null,null,null)),(l()(),t["\u0275eld"](19,0,null,null,8,"div",[["class","cs-ion-content pt0"],["padding",""]],null,null,null,null,null)),t["\u0275did"](20,16384,null,0,s.f,[t.ElementRef],null,null),(l()(),t["\u0275eld"](21,0,null,null,6,"div",[["class","gallery-container"]],null,null,null,null,null)),(l()(),t["\u0275eld"](22,0,null,null,5,"div",[["class","img-gallery"]],null,null,null,null,null)),(l()(),t["\u0275eld"](23,0,null,null,2,"div",[["class","figure upload"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.presentActionSheet()&&t),t}),null,null)),(l()(),t["\u0275eld"](24,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["add"])),(l()(),t["\u0275and"](16777216,null,null,1,null,I)),t["\u0275did"](27,278528,null,0,u.j,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){var e=n.component;l(n,9,0,"arrow-back"),l(n,17,0,"Customer"!=e.loginData.loginType),l(n,27,0,e.taskImageData)}),(function(l,n){l(n,12,0,n.component.taskNo)}))}function C(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"app-com-images",[],null,null,null,R,k)),t["\u0275did"](1,114688,null,0,f,[s.Nb,s.a,u.g,b.m,b.a,s.b,s.Sb,d.a,m.a,g.a,h.a,p.a,v.a],null,null)],(function(l,n){l(n,1,0)}),null)}var S=t["\u0275ccf"]("app-com-images",f,C,{},{},[]),y=e("s7LF");class N{}e.d(n,"ComImagesPageModuleNgFactory",(function(){return w}));var w=t["\u0275cmf"](a,[],(function(l){return t["\u0275mod"]([t["\u0275mpd"](512,t.ComponentFactoryResolver,t["\u0275CodegenComponentFactoryResolver"],[[8,[o.a,S]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["\u0275mpd"](4608,u.m,u.l,[t.LOCALE_ID,[2,u.z]]),t["\u0275mpd"](4608,y.s,y.s,[]),t["\u0275mpd"](4608,s.c,s.c,[t.NgZone,t.ApplicationRef]),t["\u0275mpd"](4608,s.Ib,s.Ib,[s.c,t.ComponentFactoryResolver,t.Injector]),t["\u0275mpd"](4608,s.Nb,s.Nb,[s.c,t.ComponentFactoryResolver,t.Injector]),t["\u0275mpd"](1073742336,u.b,u.b,[]),t["\u0275mpd"](1073742336,y.r,y.r,[]),t["\u0275mpd"](1073742336,y.e,y.e,[]),t["\u0275mpd"](1073742336,s.Fb,s.Fb,[]),t["\u0275mpd"](1073742336,b.p,b.p,[[2,b.u],[2,b.m]]),t["\u0275mpd"](1073742336,N,N,[]),t["\u0275mpd"](1073742336,a,a,[]),t["\u0275mpd"](1024,b.k,(function(){return[[{path:"",component:f}]]}),[])])}))}}]);